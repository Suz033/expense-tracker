<div class="d-flex justify-content-center m-2">
  <form class="input-group" action="/search" method="get">
    <select class="form-select" name="categoryId" id="categoryId" onchange="submit()">
      <option value="">全部</option>
      {{#each categories}}
      <option value="{{ this._id }}" {{#if this.selected}} selected {{/if}}>{{ this.name }}</option>
      {{/each}}
    </select>
  </form>
</div>

<div class="d-flex justify-content-between m-3">
  <p>總金額：</p>
  <p class="p-3" style="font-size: 3em;">{{ totalAmount }}</p>
</div>

<ul class="list-group">
  {{#if records}}
    {{#each records}}
    <li class="list-group-item">
      <div class="d-flex justify-content-between align-items-center">
        <i class="{{ this.categoryIcon.icon }} ms-3" style="max-width: 1rem;"></i>
        <div class="d-flex flex-column flex-grow-1 ms-5">
          <p class="m-0">{{ this.record.name }}</p>
          <p class="m-0">{{ this.record.date }}</p>
        </div>
        <div class="me-3">
          {{ this.record.amount }}
        </div>
        <a href="/records/{{ this.record._id }}/edit" class="btn btn-primary ms-2">修改</a>
        <form action="/records/{{ this.record._id }}?_method=DELETE" method="post">
          <button class="btn btn-danger ms-2">刪除</button>
        </form>
      </div>
    </li>
    {{/each}}
    {{else}}
    <li class="list-group-item mb-3">
      <h3 class="text-center mt-2">尚無支出紀錄</h3>
    </li>
  {{/if}}
</ul>
<div class="d-flex justify-content-center mt-3 mb-5">
  <a href="/records/new" class="btn btn-primary">新增支出</a>
</div>